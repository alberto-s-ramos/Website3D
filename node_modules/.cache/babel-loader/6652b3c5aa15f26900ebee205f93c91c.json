{"ast":null,"code":"import _objectWithoutProperties from\"/Users/alberto.ramos/Documents/Personal/GitHub/Website3D/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{createContext,useRef,useContext}from\"react\";import{useFrame,useThree}from\"react-three-fiber\";import lerp from\"lerp\";import state from\"./state\";var offsetContext=createContext(0);function Section(_ref){var children=_ref.children,offset=_ref.offset,factor=_ref.factor,props=_objectWithoutProperties(_ref,[\"children\",\"offset\",\"factor\"]);var _useSection=useSection(),parentOffset=_useSection.offset,sectionHeight=_useSection.sectionHeight,aspect=_useSection.aspect;var ref=useRef();offset=offset!==undefined?offset:parentOffset;useFrame(function(){var curY=ref.current.position.y;var curTop=state.top.current/aspect;ref.current.position.y=lerp(curY,curTop/state.zoom*factor,0.1);});return/*#__PURE__*/React.createElement(offsetContext.Provider,{value:offset},/*#__PURE__*/React.createElement(\"group\",Object.assign({},props,{position:[0,-sectionHeight*offset*factor,0]}),/*#__PURE__*/React.createElement(\"group\",{ref:ref},children)));}function useSection(){var sections=state.sections,pages=state.pages,zoom=state.zoom;var _useThree=useThree(),size=_useThree.size,viewport=_useThree.viewport;var offset=useContext(offsetContext);var viewportWidth=viewport.width;var viewportHeight=viewport.height;var canvasWidth=viewportWidth/zoom;var canvasHeight=viewportHeight/zoom;var mobile=size.width<700;var margin=canvasWidth*(mobile?0.2:0.1);var contentMaxWidth=canvasWidth*(mobile?0.8:0.6);var sectionHeight=canvasHeight;var aspect=size.height/viewportHeight;return{aspect:aspect,viewport:viewport,offset:offset,viewportWidth:viewportWidth,viewportHeight:viewportHeight,canvasWidth:canvasWidth,canvasHeight:canvasHeight,mobile:mobile,margin:margin,contentMaxWidth:contentMaxWidth,sectionHeight:sectionHeight};}export{Section,useSection};","map":{"version":3,"sources":["/Users/alberto.ramos/Documents/Personal/GitHub/Website3D/src/components/section.js"],"names":["React","createContext","useRef","useContext","useFrame","useThree","lerp","state","offsetContext","Section","children","offset","factor","props","useSection","parentOffset","sectionHeight","aspect","ref","undefined","curY","current","position","y","curTop","top","zoom","sections","pages","size","viewport","viewportWidth","width","viewportHeight","height","canvasWidth","canvasHeight","mobile","margin","contentMaxWidth"],"mappings":"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","sourcesContent":["import React, { createContext, useRef, useContext } from \"react\";\nimport { useFrame, useThree } from \"react-three-fiber\";\nimport lerp from \"lerp\";\nimport state from \"./state\";\n\nconst offsetContext = createContext(0);\n\nfunction Section({ children, offset, factor, ...props }) {\n  const { offset: parentOffset, sectionHeight, aspect } = useSection();\n  const ref = useRef();\n  offset = offset !== undefined ? offset : parentOffset;\n  useFrame(() => {\n    const curY = ref.current.position.y;\n    const curTop = state.top.current / aspect;\n    ref.current.position.y = lerp(curY, (curTop / state.zoom) * factor, 0.1);\n  });\n  return (\n    <offsetContext.Provider value={offset}>\n      <group {...props} position={[0, -sectionHeight * offset * factor, 0]}>\n        <group ref={ref}>{children}</group>\n      </group>\n    </offsetContext.Provider>\n  );\n}\n\nfunction useSection() {\n  const { sections, pages, zoom } = state;\n  const { size, viewport } = useThree();\n  const offset = useContext(offsetContext);\n  const viewportWidth = viewport.width;\n  const viewportHeight = viewport.height;\n  const canvasWidth = viewportWidth / zoom;\n  const canvasHeight = viewportHeight / zoom;\n  const mobile = size.width < 700;\n  const margin = canvasWidth * (mobile ? 0.2 : 0.1);\n  const contentMaxWidth = canvasWidth * (mobile ? 0.8 : 0.6);\n  const sectionHeight = canvasHeight;\n  const aspect = size.height / viewportHeight;\n  return {\n    aspect,\n    viewport,\n    offset,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    mobile,\n    margin,\n    contentMaxWidth,\n    sectionHeight,\n  };\n}\n\nexport { Section, useSection };\n"]},"metadata":{},"sourceType":"module"}